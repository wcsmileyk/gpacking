"""Reconfigured for psql

Revision ID: 89e41d77a1bb
Revises: 
Create Date: 2017-07-08 10:21:36.025707

"""
from alembic import op
import sqlalchemy as sa


# revision identifiers, used by Alembic.
revision = '89e41d77a1bb'
down_revision = None
branch_labels = None
depends_on = None


def upgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    op.create_index(op.f('ix_activities_name'), 'activities', ['name'], unique=False)
    op.drop_index('idx_16616_ix_activities_name', table_name='activities')
    op.create_index(op.f('ix_categories_name'), 'categories', ['name'], unique=True)
    op.drop_index('idx_16625_ix_categories_name', table_name='categories')
    op.drop_index('idx_16635_closet_id', table_name='closet_items')
    op.drop_index('idx_16635_item_id', table_name='closet_items')
    op.drop_constraint('closet_items_ibfk_1', 'closet_items', type_='foreignkey')
    op.drop_constraint('closet_items_ibfk_2', 'closet_items', type_='foreignkey')
    op.create_foreign_key(None, 'closet_items', 'closets', ['closet_id'], ['id'])
    op.create_foreign_key(None, 'closet_items', 'items', ['item_id'], ['id'])
    op.drop_index('idx_16631_user_id', table_name='closets')
    op.drop_constraint('closets_ibfk_1', 'closets', type_='foreignkey')
    op.create_foreign_key(None, 'closets', 'users', ['user_id'], ['id'])
    op.drop_index('idx_16638_requested_id', table_name='friends')
    op.drop_constraint('friends_ibfk_3', 'friends', type_='foreignkey')
    op.drop_constraint('friends_ibfk_2', 'friends', type_='foreignkey')
    op.create_foreign_key(None, 'friends', 'users', ['requestor_id'], ['id'])
    op.create_foreign_key(None, 'friends', 'users', ['requested_id'], ['id'])
    op.drop_index('idx_16641_group_list_id', table_name='gl_items')
    op.drop_index('idx_16641_item_id', table_name='gl_items')
    op.drop_constraint('gl_items_ibfk_1', 'gl_items', type_='foreignkey')
    op.drop_constraint('gl_items_ibfk_2', 'gl_items', type_='foreignkey')
    op.create_foreign_key(None, 'gl_items', 'group_lists', ['group_list_id'], ['id'])
    op.create_foreign_key(None, 'gl_items', 'items', ['item_id'], ['id'])
    op.drop_index('idx_16653_group_id', table_name='group_items')
    op.drop_index('idx_16653_item_id', table_name='group_items')
    op.drop_constraint('group_items_ibfk_2', 'group_items', type_='foreignkey')
    op.drop_constraint('group_items_ibfk_1', 'group_items', type_='foreignkey')
    op.create_foreign_key(None, 'group_items', 'items', ['item_id'], ['id'])
    op.create_foreign_key(None, 'group_items', 'groups', ['group_id'], ['id'])
    op.drop_index('idx_16658_group_id', table_name='group_lists')
    op.drop_index('idx_16658_user_id', table_name='group_lists')
    op.drop_constraint('group_lists_ibfk_1', 'group_lists', type_='foreignkey')
    op.drop_constraint('group_lists_ibfk_2', 'group_lists', type_='foreignkey')
    op.create_foreign_key(None, 'group_lists', 'groups', ['group_id'], ['id'])
    op.create_foreign_key(None, 'group_lists', 'users', ['user_id'], ['id'])
    op.create_index(op.f('ix_groups_name'), 'groups', ['name'], unique=False)
    op.drop_index('idx_16646_activity_id', table_name='groups')
    op.drop_index('idx_16646_ix_groups_name', table_name='groups')
    op.drop_constraint('groups_ibfk_1', 'groups', type_='foreignkey')
    op.create_foreign_key(None, 'groups', 'activities', ['activity_id'], ['id'])
    op.drop_index('idx_16650_group_id', table_name='groups_assoc')
    op.drop_index('idx_16650_user_id', table_name='groups_assoc')
    op.drop_constraint('groups_assoc_ibfk_2', 'groups_assoc', type_='foreignkey')
    op.drop_constraint('groups_assoc_ibfk_1', 'groups_assoc', type_='foreignkey')
    op.create_foreign_key(None, 'groups_assoc', 'users', ['user_id'], ['id'])
    op.create_foreign_key(None, 'groups_assoc', 'groups', ['group_id'], ['id'])
    op.create_index(op.f('ix_items_name'), 'items', ['name'], unique=False)
    op.drop_index('idx_16664_cat_id', table_name='items')
    op.drop_index('idx_16664_ix_items_name', table_name='items')
    op.drop_index('idx_16664_type_id', table_name='items')
    op.drop_constraint('items_ibfk_1', 'items', type_='foreignkey')
    op.drop_constraint('items_ibfk_2', 'items', type_='foreignkey')
    op.create_foreign_key(None, 'items', 'categories', ['cat_id'], ['id'])
    op.create_foreign_key(None, 'items', 'types', ['type_id'], ['id'])
    op.create_index(op.f('ix_packing_lists_name'), 'packing_lists', ['name'], unique=False)
    op.drop_index('idx_16670_activity_id', table_name='packing_lists')
    op.drop_index('idx_16670_ix_packing_lists_name', table_name='packing_lists')
    op.drop_index('idx_16670_user_id', table_name='packing_lists')
    op.drop_constraint('packing_lists_ibfk_2', 'packing_lists', type_='foreignkey')
    op.drop_constraint('packing_lists_ibfk_1', 'packing_lists', type_='foreignkey')
    op.create_foreign_key(None, 'packing_lists', 'users', ['user_id'], ['id'])
    op.create_foreign_key(None, 'packing_lists', 'activities', ['activity_id'], ['id'])
    op.drop_index('idx_16674_item_id', table_name='pl_items')
    op.drop_index('idx_16674_pl_id', table_name='pl_items')
    op.drop_constraint('pl_items_ibfk_1', 'pl_items', type_='foreignkey')
    op.drop_constraint('pl_items_ibfk_2', 'pl_items', type_='foreignkey')
    op.create_foreign_key(None, 'pl_items', 'items', ['item_id'], ['id'])
    op.create_foreign_key(None, 'pl_items', 'packing_lists', ['pl_id'], ['id'])
    op.drop_index('idx_16679_name', table_name='roles')
    op.create_unique_constraint(None, 'roles', ['name'])
    op.create_index(op.f('ix_types_name'), 'types', ['name'], unique=True)
    op.drop_index('idx_16685_cat_id', table_name='types')
    op.drop_index('idx_16685_ix_types_name', table_name='types')
    op.drop_constraint('types_ibfk_1', 'types', type_='foreignkey')
    op.create_foreign_key(None, 'types', 'categories', ['cat_id'], ['id'])
    op.create_index(op.f('ix_users_email'), 'users', ['email'], unique=True)
    op.create_index(op.f('ix_users_username'), 'users', ['username'], unique=True)
    op.drop_index('idx_16691_ix_users_email', table_name='users')
    op.drop_index('idx_16691_ix_users_username', table_name='users')
    op.drop_index('idx_16691_role_id', table_name='users')
    op.drop_constraint('users_ibfk_1', 'users', type_='foreignkey')
    op.create_foreign_key(None, 'users', 'roles', ['role_id'], ['id'])
    # ### end Alembic commands ###


def downgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    op.drop_constraint(None, 'users', type_='foreignkey')
    op.create_foreign_key('users_ibfk_1', 'users', 'roles', ['role_id'], ['id'], onupdate='RESTRICT', ondelete='RESTRICT')
    op.create_index('idx_16691_role_id', 'users', ['role_id'], unique=False)
    op.create_index('idx_16691_ix_users_username', 'users', ['username'], unique=True)
    op.create_index('idx_16691_ix_users_email', 'users', ['email'], unique=True)
    op.drop_index(op.f('ix_users_username'), table_name='users')
    op.drop_index(op.f('ix_users_email'), table_name='users')
    op.drop_constraint(None, 'types', type_='foreignkey')
    op.create_foreign_key('types_ibfk_1', 'types', 'categories', ['cat_id'], ['id'], onupdate='RESTRICT', ondelete='RESTRICT')
    op.create_index('idx_16685_ix_types_name', 'types', ['name'], unique=True)
    op.create_index('idx_16685_cat_id', 'types', ['cat_id'], unique=False)
    op.drop_index(op.f('ix_types_name'), table_name='types')
    op.drop_constraint(None, 'roles', type_='unique')
    op.create_index('idx_16679_name', 'roles', ['name'], unique=True)
    op.drop_constraint(None, 'pl_items', type_='foreignkey')
    op.drop_constraint(None, 'pl_items', type_='foreignkey')
    op.create_foreign_key('pl_items_ibfk_2', 'pl_items', 'packing_lists', ['pl_id'], ['id'], onupdate='RESTRICT', ondelete='RESTRICT')
    op.create_foreign_key('pl_items_ibfk_1', 'pl_items', 'items', ['item_id'], ['id'], onupdate='RESTRICT', ondelete='RESTRICT')
    op.create_index('idx_16674_pl_id', 'pl_items', ['pl_id'], unique=False)
    op.create_index('idx_16674_item_id', 'pl_items', ['item_id'], unique=False)
    op.drop_constraint(None, 'packing_lists', type_='foreignkey')
    op.drop_constraint(None, 'packing_lists', type_='foreignkey')
    op.create_foreign_key('packing_lists_ibfk_1', 'packing_lists', 'activities', ['activity_id'], ['id'], onupdate='RESTRICT', ondelete='RESTRICT')
    op.create_foreign_key('packing_lists_ibfk_2', 'packing_lists', 'users', ['user_id'], ['id'], onupdate='RESTRICT', ondelete='RESTRICT')
    op.create_index('idx_16670_user_id', 'packing_lists', ['user_id'], unique=False)
    op.create_index('idx_16670_ix_packing_lists_name', 'packing_lists', ['name'], unique=False)
    op.create_index('idx_16670_activity_id', 'packing_lists', ['activity_id'], unique=False)
    op.drop_index(op.f('ix_packing_lists_name'), table_name='packing_lists')
    op.drop_constraint(None, 'items', type_='foreignkey')
    op.drop_constraint(None, 'items', type_='foreignkey')
    op.create_foreign_key('items_ibfk_2', 'items', 'types', ['type_id'], ['id'], onupdate='RESTRICT', ondelete='RESTRICT')
    op.create_foreign_key('items_ibfk_1', 'items', 'categories', ['cat_id'], ['id'], onupdate='RESTRICT', ondelete='RESTRICT')
    op.create_index('idx_16664_type_id', 'items', ['type_id'], unique=False)
    op.create_index('idx_16664_ix_items_name', 'items', ['name'], unique=False)
    op.create_index('idx_16664_cat_id', 'items', ['cat_id'], unique=False)
    op.drop_index(op.f('ix_items_name'), table_name='items')
    op.drop_constraint(None, 'groups_assoc', type_='foreignkey')
    op.drop_constraint(None, 'groups_assoc', type_='foreignkey')
    op.create_foreign_key('groups_assoc_ibfk_1', 'groups_assoc', 'groups', ['group_id'], ['id'], onupdate='RESTRICT', ondelete='RESTRICT')
    op.create_foreign_key('groups_assoc_ibfk_2', 'groups_assoc', 'users', ['user_id'], ['id'], onupdate='RESTRICT', ondelete='RESTRICT')
    op.create_index('idx_16650_user_id', 'groups_assoc', ['user_id'], unique=False)
    op.create_index('idx_16650_group_id', 'groups_assoc', ['group_id'], unique=False)
    op.drop_constraint(None, 'groups', type_='foreignkey')
    op.create_foreign_key('groups_ibfk_1', 'groups', 'activities', ['activity_id'], ['id'], onupdate='RESTRICT', ondelete='RESTRICT')
    op.create_index('idx_16646_ix_groups_name', 'groups', ['name'], unique=False)
    op.create_index('idx_16646_activity_id', 'groups', ['activity_id'], unique=False)
    op.drop_index(op.f('ix_groups_name'), table_name='groups')
    op.drop_constraint(None, 'group_lists', type_='foreignkey')
    op.drop_constraint(None, 'group_lists', type_='foreignkey')
    op.create_foreign_key('group_lists_ibfk_2', 'group_lists', 'users', ['user_id'], ['id'], onupdate='RESTRICT', ondelete='RESTRICT')
    op.create_foreign_key('group_lists_ibfk_1', 'group_lists', 'groups', ['group_id'], ['id'], onupdate='RESTRICT', ondelete='RESTRICT')
    op.create_index('idx_16658_user_id', 'group_lists', ['user_id'], unique=False)
    op.create_index('idx_16658_group_id', 'group_lists', ['group_id'], unique=False)
    op.drop_constraint(None, 'group_items', type_='foreignkey')
    op.drop_constraint(None, 'group_items', type_='foreignkey')
    op.create_foreign_key('group_items_ibfk_1', 'group_items', 'groups', ['group_id'], ['id'], onupdate='RESTRICT', ondelete='RESTRICT')
    op.create_foreign_key('group_items_ibfk_2', 'group_items', 'items', ['item_id'], ['id'], onupdate='RESTRICT', ondelete='RESTRICT')
    op.create_index('idx_16653_item_id', 'group_items', ['item_id'], unique=False)
    op.create_index('idx_16653_group_id', 'group_items', ['group_id'], unique=False)
    op.drop_constraint(None, 'gl_items', type_='foreignkey')
    op.drop_constraint(None, 'gl_items', type_='foreignkey')
    op.create_foreign_key('gl_items_ibfk_2', 'gl_items', 'items', ['item_id'], ['id'], onupdate='RESTRICT', ondelete='RESTRICT')
    op.create_foreign_key('gl_items_ibfk_1', 'gl_items', 'group_lists', ['group_list_id'], ['id'], onupdate='RESTRICT', ondelete='RESTRICT')
    op.create_index('idx_16641_item_id', 'gl_items', ['item_id'], unique=False)
    op.create_index('idx_16641_group_list_id', 'gl_items', ['group_list_id'], unique=False)
    op.drop_constraint(None, 'friends', type_='foreignkey')
    op.drop_constraint(None, 'friends', type_='foreignkey')
    op.create_foreign_key('friends_ibfk_2', 'friends', 'users', ['requested_id'], ['id'], onupdate='RESTRICT', ondelete='RESTRICT')
    op.create_foreign_key('friends_ibfk_3', 'friends', 'users', ['requestor_id'], ['id'], onupdate='RESTRICT', ondelete='RESTRICT')
    op.create_index('idx_16638_requested_id', 'friends', ['requested_id'], unique=False)
    op.drop_constraint(None, 'closets', type_='foreignkey')
    op.create_foreign_key('closets_ibfk_1', 'closets', 'users', ['user_id'], ['id'], onupdate='RESTRICT', ondelete='RESTRICT')
    op.create_index('idx_16631_user_id', 'closets', ['user_id'], unique=False)
    op.drop_constraint(None, 'closet_items', type_='foreignkey')
    op.drop_constraint(None, 'closet_items', type_='foreignkey')
    op.create_foreign_key('closet_items_ibfk_2', 'closet_items', 'items', ['item_id'], ['id'], onupdate='RESTRICT', ondelete='RESTRICT')
    op.create_foreign_key('closet_items_ibfk_1', 'closet_items', 'closets', ['closet_id'], ['id'], onupdate='RESTRICT', ondelete='RESTRICT')
    op.create_index('idx_16635_item_id', 'closet_items', ['item_id'], unique=False)
    op.create_index('idx_16635_closet_id', 'closet_items', ['closet_id'], unique=False)
    op.create_index('idx_16625_ix_categories_name', 'categories', ['name'], unique=True)
    op.drop_index(op.f('ix_categories_name'), table_name='categories')
    op.create_index('idx_16616_ix_activities_name', 'activities', ['name'], unique=False)
    op.drop_index(op.f('ix_activities_name'), table_name='activities')
    # ### end Alembic commands ###
